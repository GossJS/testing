# testing
различные виды тестирования веб-приложений

Есть тестирование кода, которое в веб-программировании может оказаться мало отличимым от тестирования в любом другом программировании - например, юнит-тестирование функций.
- http://testingjs.tilda.ws/ 
- https://kodaktor.ru/testing_add
(По предыдущим двум ссылкам много ES5-кода из-за особенностей использования Mocha внутри браузера)

Предварительным этапом к этому является линтинг https://github.com/GossJS/eslint

Но есть тестирование, отражающее именно специфику веб. Например, межстраничное тестирование и тестирование гиперссылок.

Мы рассмотрим тестирование ещё и под углом обучения - студенты получают задание, и хочется максимально автоматизировать процесс проверки. Отсюда возникают два варианта:
- тестирование результатов работы серверных сценариев, возвращаемых в виде ответа от сервера;
- тестирование хода и результатов работы клиентских сценариев.

Для проверки первого типа в простейшем случае может оказаться достаточно curl - если ставится условие, что по такому-то URL должен быть возвращён, к примеру, JSON.

Для проверки второго типа неизбежен браузерный подход, и исторически выделились две возможности:
- ПО, имитирующее работу браузера (zombie, https://github.com/GossJS/promisified-client-testing )
- собственно браузер, запускаемый в режиме программного управления тестирующим сценарием ( Chromium/Puppeteet, https://github.com/GossJS/imyourpuppet и https://kodaktor.ru/g/puppetform.man )

Примеры автоматизированной проверки:
- требование z7a ( https://kodaktor.ru/g/z7a ) - особый заголовок, описывающий авторство
- решение системы уравнений методом Крамера ( https://kodaktor.ru/g/testing_kramer?a1=-3&b1=4&c1=-40&a2=5&b2=-2&c2=34 )
- проверка валидности почтового адреса (https://kodaktor.ru/g/lr_yandextestclick и  https://kodaktor.ru/api2/gmailtest ) 

---

При формулировании заданий студентам, проверка выполнения которых предполагается автоматизированной, желательно сразу продемонстрировать, как будет осуществляться проверка. Представленные выше ссылки с yandextestclick и z7a открыты для публичного пользования. Всегда можно склонировать и приведённые выше репозитории. Но я считаю удобным держать в яндекс-диске папки с уже установленными zombie и Puppeteer, чтобы можно было запускать тестирующие сценарии без всяких подготовительных этапов.

Допустим, мы даём задание создать серверный сценарий, который выводит фамилию автора латиницей. В этом случае тестирование может состоять в сопоставлении ответа от сервера с регулярным выражением вида /^[A-Z][a-z]{2,22}$/ ( https://kodaktor.ru/reggen )

Или - сценарий, который принимает на входе два числа и выдаёт их сумму. Чем это принципиально отличается от https://kodaktor.ru/testing_add ? Тем, что в клиентском сценарии мы не можем обратиться к произвольному серверному сценарию, если отдельно не сформулировано требование CORS ( https://kodaktor.ru/g/cors ) - а в остальном всё то же самое, только функция s1 не просто хардкодно вычисляет сумму x и y, а вызывает page.visit или page.goto в качестве «микросервиса», который (предположительно) производит это вычисление.

Таким образом, проверка сводится к тому, чтобы:
- выдать задание, показав способ проверки;
- собрать ответы (в виде пулл-реквестов или гугл-формы или слака или форума в LMS и т.п.)
- прогнать массив ответов через тестер

